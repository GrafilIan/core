{% extends 'studentbase.html' %}

{% block title %}Intern Dashboard{% endblock %}

{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static 'assets/modules/bootstrap-social/bootstrap-social.css' %}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="{% static 'assets/modules/bootstrap-social/bootstrap-social.css' %}">
    <link rel="stylesheet" href="{% static 'assets/modules/prism/prism.css' %}">
    <link rel="stylesheet" href="{% static 'assets/modules/chocolat/dist/css/chocolat.css' %}">
{% endblock %}


{% block content %}

    <div class="main-content" style="min-height: 569px;">

        <section class="section" style="margin-top: 12px;">

            <div class="hero text-white hero-bg-image hero-bg-parallax text-center"
                 style="background-image: url('{% static 'assets/img/unsplash/notes.jpg' %}'); margin-top: -20px; margin-left: -35px; margin-right: -30px;">

                <div class="hero-inner" style="padding: 20px;">
                    <h1>Dashboard</h1>
                    <h6>See the latest announcement from your OJT Coordinator below</h6>
                    <div id="clock" style="font-size: 30px;"></div>
                    <h5>Internship Started on {{ internship.starting_month }}</h5>

                    <div class="row">
                        <div class="col-md-6 text-left">
                            <p>Rendered Hours:</p>
                            <h2>{{ total_hours_rendered }} hrs</h2>
                        </div>

                        <div class="col-md-6 text-right">
                            <p>OJT Hours:</p>
                            <h2>{{ max_hours }} hrs</h2>
                        </div>
                    </div>

                    <div class="progress mb-1">
                        <div class="progress-bar bg-warning" role="progressbar" aria-valuenow="{{ remaining_hours }}"
                             aria-valuemin="0" aria-valuemax="366" style="width: {{ remaining_percentage }}%;"></div>
                    </div>
                </div>
            </div>

            <div class="card card-dark profile-widget" style="margin-top: 50px;">
                <div class="profile-widget-header">
                    <img alt="image"
                         src="{% static 'assets/img/unsplash/eberhard-grossgasteiger-1207565-unsplash.jpg' %}"
                         class="rounded-circle profile-widget-picture" style="width: 140px; height: 140px;">
                    <div class="profile-widget-items">
                        <div class="profile-widget-item" style="background-color: #efb100; margin-left: -10px;">
                            <div class="profile-widget-item-label">Student Number</div>
                            <div class="profile-widget-item-value">{{ intern.student_id }}</div>
                        </div>
                        <div class="profile-widget-item" style="background-color: #efb100">
                            <div class="profile-widget-item-label">{{ intern.course }}</div>
                            <div class="profile-widget-item-value">{{ intern.year_level }}-{{ intern.block }}</div>
                        </div>
                        <div class="profile-widget-item" style="background-color: #efb100">
                            <div class="profile-widget-item-label">{{ intern.academic_year }}</div>
                            <div class="profile-widget-item-value">{{ intern.semester }}</div>
                        </div>
                        <div class="profile-widget-item" style="background-color: #efb100">
                            <div class="profile-widget-item-label">{% if intern.address != 'na' %}
                                {{ intern.address }}
                            {% endif %}</div>
                            <div class="profile-widget-item-value">{% if intern.company_name != 'na' %}
                                {{ intern.company_name }}
                            {% endif %}</div>
                        </div>
                        <div class="profile-widget-item" style="background-color: #efb100">
                            <div class="profile-widget-item-label">{{ intern.contact_person }}</div>
                            <div class="profile-widget-item-value">{{ intern.contact_number }}</div>
                        </div>
                    </div>
                </div>

                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 col-sm-12" style="text-align: left;">
                            <div style="font-size: 25px; font-weight: 700;">
                                <strong>{{ intern.user.first_name }}
                                    {% if intern.middle_name != 'na' %}
                                        {{ intern.middle_name }}
                                    {% endif %}
                                    {{ intern.user.last_name }}
                                    {% if intern.suffix != 'na' %}
                                        {{ intern.suffix }}
                                    {% endif %}
                                </strong>
                            </div>
                            {{ intern.user.username }}
                            <div class="text-muted d-inline font-weight-normal">
                                <div class="slash"></div>
                                {{ intern.status }}
                            </div>
                            <div class="profile-widget-item-value"><strong>{{ intern.user.email }}</strong>
                                <div class="profile-widget-item-label">{{ intern.present_address }}</div>
                                <a href="{% url 'add_intern_records' %}" class="btn btn-primary"
                                   style="display: block; margin-top: 7px;">Edit</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="row" style="margin-top: 15px;">
                <div class="col-12 col-sm-6 col-md-6 col-lg-3" style="padding: 1px; margin-top: -10px;">
                    <article class="article" style="box-shadow: 0px -1px 6px rgba(0, 0, 0, 0.2);">
                        <div class="article-header">
                            <div class="article-image" data-background="{% static 'assets/img/news/new2-01.png' %}"
                                 style="background-image: url(&quot;assets/img/news/img08.jpg&quot;);">
                            </div>
                            <div class="article-title">
                                <h2><a href="{% url 'upload_requirements' %}">Internship Requirement</a></h2>
                            </div>
                        </div>
                    </article>
                </div>
                <div class="col-12 col-sm-6 col-md-6 col-lg-3" style="padding: 1px; margin-top: -10px;">

                    <article class="article" style="box-shadow: 0px -1px 6px rgba(0, 0, 0, 0.2);">
                        <div class="article-header">
                            <div class="article-image" data-background="{% static 'assets/img/news/new3-01.png' %}"
                                 style="background-image: url(&quot;assets/img/news/img04.jpg&quot;);">
                            </div>
                            <div class="article-title">
                                <h2><a href="{% url 'upload_narrative' %}">Narrative Report</a></h2>
                            </div>
                        </div>
                    </article>
                </div>
                <div class="col-12 col-sm-6 col-md-6 col-lg-3" style="padding: 1px; margin-top: -10px;">
                    <article class="article" style="box-shadow: 0px -1px 6px rgba(0, 0, 0, 0.2);">
                        <div class="article-header">
                            <div class="article-image" data-background="{% static 'assets/img/news/dash3.png' %}"
                                 style="background-image: url(&quot;assets/img/news/img04.jpg&quot;);">
                            </div>
                            <div class="article-title">
                                <h2><a href="{% url 'upload_dtr' %}">DTR Upload</a></h2>
                            </div>
                        </div>
                    </article>
                </div>
                <div class="col-12 col-sm-6 col-md-6 col-lg-3" style="padding: 1px; margin-top: -10px;">
                    <article class="article" style="box-shadow: 0px -1px 6px rgba(0, 0, 0, 0.2);">
                        <div class="article-header">
                            <div class="article-image" data-background="{% static 'assets/img/news/new1-01.png' %}"
                                 style="background-image: url(&quot;assets/img/news/img12.jpg&quot;);">
                            </div>
                            <div class="article-title">
                                <h2><a href="{% url 'upload_post_requirements' %}">Post Requirements</a></h2>
                            </div>
                        </div>
                    </article>
                </div>
            </div>
            <div class="section-body" style="margin-top: -5px; padding-top: 0;">

                <div class="row">
                    <div class="col-md-12">
                        <div class="card">
                            <h3 id="currentDate" style="margin-left: 24px;"></h3>
                            <div class="card-body">
                                <ul style="list-style-type: none; padding: 0px;">
                                    {% for announcement in announcements %}
                                        {% if announcement.announcement_list %}
                                            <li class="list-item announcement-item" style="text-align: center;">
                                                <div class="card card-primary"
                                                     style="margin-top: 10px; background-color: #f3f3f3;">

                                                <span class="announcement-text">
                                                    Posted on: {{ announcement.pub_date|date:"F d, Y" }}<br>
                                                    {{ announcement.announcement_list|safe }}
                                                </span>
                                                    {% if announcement.image_announcement %}
                                                        <img src="{{ announcement.image_announcement.url|safe }}"
                                                             width="50%"
                                                             alt="Announcement Image" class="announcement-image"
                                                             style="display: block; margin: 0 auto;">
                                                    {% endif %}
                                                    {% if announcement.document_announcement %}
                                                        <a href="{{ announcement.document_announcement.url|safe }}"
                                                           target="_blank" class="announcement-link">View Document</a>
                                                    {% endif %}
                                                </div>
                                            </li>
                                        {% endif %}
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

{% endblock %}

{% block scripts %}


    <script src="{% static 'assets/modules/summernote/summernote-bs4.js' %}"></script>
    <script src="{% static 'assets/modules/jquery-selectric/jquery.selectric.min.js' %}"></script>
    <script src="{% static 'assets/modules/upload-preview/assets/js/jquery.uploadPreview.min.js' %}"></script>
    <script src="{% static 'assets/modules/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js' %}"></script>

    <!-- Page Specific JS File -->
    <script src="{% static 'assets/js/page/features-post-create.js' %}"></script>


    <script src="{% static 'assets/modules/chocolat/dist/js/jquery.chocolat.min.js' %}"></script>
    <script src="{% static 'assets/modules/jquery-ui/jquery-ui.min.js' %}"></script>


    <!-- JS Libraies -->
    <script src="{% static 'assets/modules/sweetalert/sweetalert.min.js' %}"></script>
    <!-- Page Specific JS File -->
    <script src="{% static 'assets/js/page/modules-sweetalert.js' %}"></script>
    <script src="https://unpkg.com/sweetalert2@11"></script>


    <script>
        // JavaScript code to display the current date
        var currentDateElement = document.getElementById("currentDate");
        var currentDate = new Date();
        var options = {year: 'numeric', month: 'long', day: 'numeric'};
        var formattedDate = currentDate.toLocaleDateString(undefined, options);

        currentDateElement.innerHTML = "Date: " + formattedDate;
    </script>



    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const deleteButtons = document.querySelectorAll(".delete-button");

            deleteButtons.forEach(function (button) {
                button.addEventListener("click", function () {
                    const announcementId = this.getAttribute("data-announcement-id");

                    Swal.fire({
                        title: 'Are you sure?',
                        text: 'You won\'t be able to revert this!',
                        icon: 'warning',
                        showCancelButton: true,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Yes, delete it!'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            const form = this.closest(".delete-announcement-form");
                            form.submit();
                        }
                    });
                });
            });
        });
    </script>


{% endblock %}